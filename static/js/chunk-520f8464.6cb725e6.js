(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-520f8464"],{"41b8":function(t,e,n){var i=n("7db0");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("499e").default;a("59af932d",i,!0,{sourceMap:!1,shadowMode:!1})},"49d9":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"commentPage"},[n("div",{staticClass:"bread"},[n("el-breadcrumb",{attrs:{separator:"/"}},t._l(t.breadArr,function(e,i){return n("el-breadcrumb-item",{key:i,attrs:{to:{path:e.path}}},[t._v(t._s(e.name))])}))],1),n("div",{staticClass:"comment_list"},t._l(t.CommentListData,function(e,i){return n("div",{key:i,staticClass:"comment_list_Info"},[n("el-row",[n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content bg-purple"},[n("img",{staticStyle:{width:"60%"},attrs:{src:e.headimgurl,alt:""}})])]),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"grid-content bg-purple-light",staticStyle:{color:"#5f7082"}},[t._v(t._s(e.nickname)+" :")])]),n("el-col",{attrs:{span:8},nativeOn:{click:function(n){t.readCommendClick(e,i)}}},[-1==e.comment.indexOf("gif")?n("div",{staticClass:"grid-content bg-purple",class:{commentColor:t.commentFont==i||1==e.isread}},[t._v(t._s(e.comment))]):n("img",{staticClass:"gifimg",class:{gifimgColor:t.commentFont==i||1==e.isread},attrs:{src:"https://img.guoanfamily.com/journal/"+e.comment+"?imageView2/2/w/160",alt:""}})]),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"grid-content bg-purple"},[n("div",{staticStyle:{float:"left","margin-top":".01rem"}},[t._v("前台展示")]),n("el-switch",{staticStyle:{float:"right"},attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0,"inactive-color":"#cccccc"},on:{change:function(n){t.isShowchange(e)}},model:{value:e.isshow,callback:function(n){t.$set(e,"isshow",n)},expression:"item.isshow"}})],1)]),n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content bg-purple",staticStyle:{"text-align":"center"}},[t._v(t._s(e.articlename))])]),n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content bg-purple"},[n("el-button",{staticStyle:{float:"right"},attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(n){n.stopPropagation(),t.deleteCommentClick(e,i)}}},[t._v("删除")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.btnState,expression:"!item.btnState"}],staticStyle:{float:"right","margin-right":".1rem"},attrs:{type:"info",plain:"",size:"mini"},on:{click:function(n){n.stopPropagation(),t.replayClick(e,i)}}},[t._v("回复")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.btnState,expression:"item.btnState"}],staticStyle:{float:"right","margin-right":".1rem"},attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(n){n.stopPropagation(),t.exitClick(e,i)}}},[t._v("取消")])],1)])],1),t._l(e.newArr,function(a,o){return n("div",{key:o,staticClass:"comment_list_Info",staticStyle:{width:"100%","border-bottom":"none"}},[n("el-row",[n("el-col",{attrs:{span:2}},[n("div",{staticClass:"grid-content bg-purple"},[n("img",{staticStyle:{width:"60%"},attrs:{src:a.headimgurl,alt:""}})])]),n("el-col",{attrs:{span:5}},[n("div",{staticClass:"grid-content bg-purple-light"},[n("span",{staticStyle:{display:"inline-block",color:"#5f7082"}},[t._v(t._s(a.nickname)+" ")]),t._v("回复 "),n("span",{staticStyle:{display:"inline-block",color:"#5f7082"}},[t._v(t._s(e.nickname)+" :")])])]),n("el-col",{attrs:{span:13},nativeOn:{click:function(e){t.readCommendClick(a,o)}}},[-1==a.comment.indexOf("gif")?n("div",{staticClass:"grid-content bg-purple",class:{commentColor:t.commentFont==o||1==a.isread}},[t._v(t._s(a.comment))]):n("img",{staticClass:"gifimg",class:{gifimgColor:t.commentFont==i||1==e.isread},attrs:{src:"https://img.guoanfamily.com/journal/"+a.comment+"?imageView2/2/w/160",alt:""}})]),n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content bg-purple"},[n("el-button",{staticStyle:{float:"right"},attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(e){e.stopPropagation(),t.deleteCommentReplyClick(a,i)}}},[t._v("删除")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:!a.btnState&&"国安城市"!==a.nickname,expression:"!items.btnState && items.nickname !== '国安城市'"}],staticStyle:{float:"right"},attrs:{type:"info",plain:"",size:"mini"},on:{click:function(e){e.stopPropagation(),t.replayClick(a,i)}}},[t._v("回复")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:a.btnState,expression:"items.btnState"}],staticStyle:{float:"right"},attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(e){e.stopPropagation(),t.exitClick(a,i)}}},[t._v("取消")])],1)])],1)],1)}),n("el-row",[n("el-col",{directives:[{name:"show",rawName:"v-show",value:t.replayFlag==i,expression:"replayFlag==index"}],attrs:{span:24}},[n("div",{staticClass:"grid-content bg-purple"},[n("el-input",{attrs:{placeholder:"请输入回复内容"},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}},[n("el-button",{attrs:{slot:"append",size:"mini"},on:{click:t.saveReplayClick},slot:"append"},[t._v("发送")])],1)],1)])],1),n("div",{staticStyle:{width:"100%",height:"5px"}})],2)}))])},a=[],o=(n("ac6a"),n("7f7f"),{data:function(){return{breadArr:[{path:"/posterList",name:"电子期刊"},{path:"/commentList",name:this.$route.query.name}],journaId:this.$route.query.id,CommentListData:[],commentFont:null,replayText:"回复",replyContent:"",replayFlag:null,contentText:{},orderNum:null,isShow:!1}},methods:{isShowchange:function(t){this.$get("MarkShow?commentid=".concat(t.id,"&show=").concat(parseInt(t.isshow))).then(function(t){t.Code})},commentsListLoad:function(){var t=this;this.$get("GetEjArticlecommentbyJid?jid=".concat(this.journaId)).then(function(e){if(200==e.Code&&e.Data.length>0){var n="";e.Data.forEach(function(t){n+=t.id+",",t.newArr=[]});var i=e.Data;n=n.substring(0,n.length-1);t.$get("GetEjCommentreplayByCids?cids=".concat(n)).then(function(e){200==e.Code&&(e.Data.forEach(function(t){i.forEach(function(e){t.commentid==e.id&&e.newArr.push(t)})}),t.CommentListData=i)})}})},readCommendClick:function(t,e){1!==t.isread&&"国安城市"!==t.nickname&&(this.commentFont=e,this.$get("Markread?commentid=".concat(t.id)).then(function(t){t.Code}))},replayClick:function(t,e){this.orderNum=null,this.contentText={},t.btnState=!0,this.replayFlag=e,this.contentText=t,this.orderNum=e},exitClick:function(t,e){t.btnState=!1,this.replayFlag=null},saveReplayClick:function(){var t,e=this;if(!this.replyContent)return this.$showErrorTip("请输入回复内容"),!1;t=this.contentText.articlename?this.contentText.id:this.contentText.commentid;var n={comment:this.replyContent,commentid:t,headimgurl:"https://img.guoanfamily.com/citic.png",openid:sessionStorage.getItem("USER_ID"),ordernum:this.orderNum,nickname:"国安城市"};this.$post("EjCommentreplySave",n).then(function(t){200==t.Code&&(e.$showMsgTip("回复成功"),e.replayFlag=null,e.commentsListLoad())})},deleteCommentClick:function(t,e){var n=this;this.orderNum=null,this.orderNum=e;var i={id:t.id};this.$post("EjArticlecommentDelete",i).then(function(t){200==t.Code&&(n.$showMsgTip("删除成功"),n.commentsListLoad())})},deleteCommentReplyClick:function(t,e){var n=this,i={id:t.id};this.$post("EjCommentreplyDelete",i).then(function(t){200==t.Code&&(n.$showMsgTip("删除成功"),n.commentsListLoad())})}},mounted:function(){this.commentsListLoad()}}),c=o,s=(n("7825"),n("6223"),n("2877")),r=Object(s["a"])(c,i,a,!1,null,"c08cf732",null);r.options.__file="CommentList.vue";e["default"]=r.exports},"5a15":function(t,e,n){var i=n("d904");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("499e").default;a("553a8fc8",i,!0,{sourceMap:!1,shadowMode:!1})},6223:function(t,e,n){"use strict";var i=n("41b8"),a=n.n(i);a.a},7825:function(t,e,n){"use strict";var i=n("5a15"),a=n.n(i);a.a},"7db0":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"\n.bread .el-breadcrumb{font-size:.07rem;height:.1rem;line-height:.1rem\n}",""])},d904:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"\n.commentPage[data-v-c08cf732]{width:100%;height:100%;position:relative\n}\n.commentPage .comment_list[data-v-c08cf732]{position:absolute;padding-right:.1rem;top:.2rem;left:.2rem;width:90%;bottom:.2rem;margin:auto;overflow-y:scroll\n}\n.commentPage .comment_list .comment_list_Info[data-v-c08cf732]{width:100%;height:auto;margin-top:2px;border-bottom:1px solid #ccc\n}\n.commentPage .comment_list .comment_list_Info .commentColor[data-v-c08cf732]{color:red\n}\n.commentPage .el-col[data-v-c08cf732]{border-radius:4px\n}\n.commentPage .bg-purple[data-v-c08cf732],.commentPage .bg-purple-dark[data-v-c08cf732]{background:#fff\n}\n.commentPage .gifimg[data-v-c08cf732]{width:100px;height:100px\n}\n.commentPage .gifimg.gifimgColor[data-v-c08cf732]{border:1px solid red\n}\n.commentPage .bg-purple-light[data-v-c08cf732]{background:#fff\n}\n.commentPage .grid-content[data-v-c08cf732]{border-radius:4px;min-height:.18rem;line-height:.1rem;font-size:.07rem\n}\n.commentPage .row-bg[data-v-c08cf732]{padding:10px 0;background-color:#f9fafc\n}",""])}}]);